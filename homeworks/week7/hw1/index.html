<DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>homework1</title>
        <style>
            .main { 
                position: fixed;
                top: 50%;
                left:50%;
                transform: translate(-50%, -50%);
                font-size:25px;
                font-weight: bold;
                text-align: center;
                
            }
            .btn { margin : 10px;}
            .active { background-color:darksalmon}
            .visible { visibility: hidden;}
        </style>
    </head>
    <body>
       <div class='main'>
        <div class="title">畫面變色時請點擊</div>
        <div class="btn"><button>開始</button></div>
        </div>
        <script>
            const element = document.querySelector('body')
            const btn = document.querySelector('.btn')
            let rand = (Math.floor(Math.random() * 2001 ) + 1000)
            let start = 0
            let end = 0
            let interval = 0
            let tmp = 0
            
             btn.addEventListener('click',
                function (e) {
                  start =  Date.now()
                  interval = setTimeout (function(){
                    
                      element.classList.add('active')
                  },rand)
                e.stopPropagation()
                btn.classList.add('visible')
                btn.innerHTML = '<button>再玩一次</button>'
                tmp = 1
                }
             )
             element.addEventListener('click',
              function() { 
                 end = Date.now()
                 const  diff = end - start  
                 if (tmp === 1) {
                     if (diff < rand) {
                         clearTimeout(interval)
                         alert('還沒變色喔，失敗!')
                         
                     } else {
                       alert('你的成績: '+ diff/1000+ ' 秒')
                       element.classList.remove('active') 
                   }
                 }
                 btn.classList.remove('visible')
                 tmp = 0
                 rand = (Math.floor(Math.random() * 2001 ) + 1000)
                }
              )
        </script>
    </body>
</html>